---
title: "Introduction to ggplot2"
author: "Julia Romanowska"
institute: "BIOS, UiB"
date: "Sept. 14, 2022"
output:
  xaringan::moon_reader:
    self_contained: true
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(xaringanthemer)
style_solarized_light(
  code_font_size = "0.7rem",
  code_inline_font_size = "0.9rem"
)

# devtools::install_github("gadenbuie/xaringanExtra")
library(xaringanExtra)
use_clipboard()
use_scribble()
use_tachyons()
# use_webcam()
use_fit_screen()
use_panelset()

knitr::opts_chunk$set(
  fig.width = 6,
  message = FALSE,
  warning = FALSE,
  comment = "",
  cache = F,
  echo = FALSE,
  dpi = 150
)
# devtools::install_github("EvaMaeRey/flipbookr")
library(flipbookr)
library(tidyverse)
library(palmerpenguins)
library(fontawesome)
```


class: inverse, right, middle

## Example plot with ggplot2

---

## Data

<div style="float: right; position: fixed; right: 10px; top: 10px;">
<img style="float: right; position: relative; width: 120px" src="palmer_penguins_logo.png" alt="ggiraph"/><br>
</div>

[palmerpenguins](https://allisonhorst.github.io/palmerpenguins/)

<br><br><br>

```{r}
penguins
```

???

I will be using this simple dataset with morphological data of penguins living on a certain island.

--

> **IMPORTANT** start with tidy data!

**each row is an observation, each column is a variable**

---

```{r penguins_species_simple, include = FALSE}
ggplot(data = penguins) +
  aes(
  	x = bill_length_mm,
    y = bill_depth_mm
  ) +
  geom_point() + 
  geom_smooth(method = "lm")
```

`r chunk_reveal("penguins_species_simple", break_type = "auto", chunk_options = "warning = FALSE", font_size_code = "50%", widths = c(0.5, 0.45))`

---

```{r penguins_species, include = FALSE}
ggplot(data = penguins) +
  aes(
  	x = bill_length_mm,
    y = bill_depth_mm
  ) +
  geom_point(
    aes(color = species,
    shape = species),
      size = 2
   ) + 
  geom_smooth(
  	method = "lm",
    se = FALSE,
    aes(color = species)
  )
penguins_default <- last_plot()
```

`r chunk_reveal("penguins_species", break_type = "auto", chunk_options = "warning = FALSE", font_size_code = "50%", widths = c(0.5, 0.45))`

???

Basics of ggplot2:

- layers
- 'aesthetics' + data + geom

---

```{r penguins_species2, include = FALSE}
penguins_default +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4")
    ) +
  facet_grid(rows = vars(species)) +
  labs(title = 
    "Penguin species differentation") +
  labs(subtitle = 
    "based on bill depth and bill length") +
  xlab("bill length (mm)") +
  ylab("bill depth (mm)") +
  theme_minimal() +
  theme(
    plot.title =
      element_text(face = "bold"),
    plot.subtitle =
      element_text(face = "italic")) +
  theme(legend.position = "none")
```

`r chunk_reveal("penguins_species2", break_type = "auto", chunk_options = "warning = FALSE", font_size_code = "50%", widths = c(0.5, 0.45))`

???

OK, that was the basic graph, but we can modify everything:

- change of color,
- split into sub-graphs,
- adding graph title (and subtitle, caption)
- adding axes titles
- styling

---

## More...

- Tutorial: https://github.com/jromanowska/RMED-ggplot-tutorial

- **Extensions:**
    - [ggextensions](https://exts.ggplot2.tidyverse.org/gallery/)
    - [ggiraph](https://davidgohel.github.io/ggiraph/index.html) <- easy way of adding interactiveness to your ggplots!

- Some useful links: https://jromanowska.github.io/Visualization-basics-for-EPINOR/references.html
